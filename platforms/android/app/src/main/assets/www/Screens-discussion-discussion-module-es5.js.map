{"version":3,"sources":["./src/app/Screens/discussion/discussion.page.html","./src/app/Screens/discussion/discussion.module.ts","./src/app/Screens/discussion/discussion.page.scss","./src/app/Screens/discussion/discussion.page.ts","./src/app/Services/chat.service.ts"],"names":[],"mappings":"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","file":"Screens-discussion-discussion-module-es5.js","sourcesContent":["module.exports = \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button></ion-back-button>\\n    </ion-buttons>\\n    <ion-title>discussion</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n <div class=\\\"discussion\\\">\\n  <div *ngIf=\\\"messages.length!=0\\\">\\n    <ion-list >\\n      <div *ngFor=\\\"let msg of messages\\\" class=\\\"sender-msg\\\" >\\n        <h6 class=\\\"date\\\">{{msg.date}}</h6>\\n        <ion-item  lines=\\\"full\\\" class=\\\"send\\\" >\\n          <ion-avatar [slot]=\\\"slot(msg['sender'])\\\">\\n            <div *ngIf=\\\"slot(msg['sender'])=='start'\\\" >\\n              <img [src]=\\\"send_img\\\" *ngIf=\\\"send_img!=null\\\">\\n              <img src=\\\"../../../assets/icon/user.png\\\" *ngIf=\\\"send_img==null\\\">\\n            </div>\\n            <div *ngIf=\\\"slot(msg['sender'])=='end'\\\" >\\n              <img [src]=\\\"rec_img\\\" *ngIf=\\\"rec_img!=null\\\">\\n              <img src=\\\"../../../assets/icon/user.png\\\" *ngIf=\\\"rec_img==null\\\">\\n            </div>\\n           \\n          </ion-avatar>\\n          <h5>{{msg.text}}</h5>\\n         \\n        </ion-item>\\n      \\n        \\n      </div>\\n     \\n    \\n       \\n    </ion-list>\\n  </div>\\n  <ion-card *ngIf=\\\"this.messages.length==0\\\" class=\\\"no-chat\\\">\\n    <ion-card-content>\\n        No discussion Found\\n     </ion-card-content>\\n</ion-card>\\n </div>\\n\\n</ion-content>\\n<ion-footer>\\n  <div class=\\\"sender\\\">\\n \\n    <ion-item>\\n      <ion-input type=\\\"text\\\" [(ngModel)]=\\\"message\\\"></ion-input>\\n      <ion-icon slot=\\\"end\\\" name=\\\"send\\\"  (click)=\\\"send()\\\"></ion-icon>\\n    </ion-item>\\n  \\n  \\n</div >\\n</ion-footer>\\n\"","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { DiscussionPage } from './discussion.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: DiscussionPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [DiscussionPage]\n})\nexport class DiscussionPageModule {}\n","module.exports = \"ion-title {\\n  color: #462373; }\\n\\nion-back-button {\\n  --color:#462373; }\\n\\nion-toolbar {\\n  --background:#d6b0ff; }\\n\\n.discussion {\\n  height: 100%; }\\n\\n.no-chat {\\n  font-size: medium;\\n  color: #462373; }\\n\\n.sender-msg {\\n  margin-top: 10px;\\n  margin-bottom: 10px; }\\n\\n.rece {\\n  color: white;\\n  font-size: 15px;\\n  height: 10%;\\n  --background: #d6b0ff;\\n  width: 90%;\\n  margin: 0 auto;\\n  --border-radius:25px; }\\n\\n.send {\\n  color: white;\\n  font-size: 15px;\\n  height: 10%;\\n  --background: #462373;\\n  width: 90%;\\n  margin: 0 auto;\\n  --border-radius:25px; }\\n\\n.date {\\n  text-align: center;\\n  color: #d6b0ff; }\\n\\n.sender {\\n  height: 10%;\\n  width: 100%;\\n  background-color: #d6b0ff; }\\n\\n.sender ion-item {\\n    --background:#d6b0ff; }\\n\\n.sender ion-input {\\n    --background:#d6b0ff;\\n    --color:#462373; }\\n\\n.sender ion-icon {\\n    color: #462373;\\n    font-size: 25px;\\n    text-align: center; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3lvc3JhZmF0bmFzc2kvQnVyZWF1LzNpbmcvbW9iaWxlL3RlYW1fbWFuYWdlcl9hcHAvc3JjL2FwcC9TY3JlZW5zL2Rpc2N1c3Npb24vZGlzY3Vzc2lvbi5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxjQUFhLEVBQUE7O0FBRWpCO0VBQ0UsZUFBUSxFQUFBOztBQUdWO0VBQ0Usb0JBQWEsRUFBQTs7QUFFZjtFQUNJLFlBQVksRUFBQTs7QUFFaEI7RUFFSSxpQkFBaUI7RUFDakIsY0FBYyxFQUFBOztBQUVsQjtFQUNJLGdCQUFnQjtFQUNoQixtQkFBbUIsRUFBQTs7QUFHdkI7RUFDSSxZQUFZO0VBQ1osZUFBZTtFQUNmLFdBQVc7RUFDWCxxQkFBYTtFQUNiLFVBQVU7RUFDVixjQUFjO0VBQ2Qsb0JBQWdCLEVBQUE7O0FBSXBCO0VBQ0ksWUFBWTtFQUNaLGVBQWU7RUFDZixXQUFXO0VBQ1gscUJBQWE7RUFDYixVQUFVO0VBQ1YsY0FBYztFQUNkLG9CQUFnQixFQUFBOztBQUlwQjtFQUNJLGtCQUFrQjtFQUNsQixjQUFhLEVBQUE7O0FBRWpCO0VBQ0ksV0FBVztFQUNYLFdBQVc7RUFJWCx5QkFBeUIsRUFBQTs7QUFON0I7SUFJUSxvQkFBYSxFQUFBOztBQUpyQjtJQVFRLG9CQUFhO0lBQ2IsZUFBUSxFQUFBOztBQVRoQjtJQVlRLGNBQWM7SUFDZCxlQUFlO0lBQ2Ysa0JBQWtCLEVBQUEiLCJmaWxlIjoic3JjL2FwcC9TY3JlZW5zL2Rpc2N1c3Npb24vZGlzY3Vzc2lvbi5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJpb24tdGl0bGV7XG4gICAgY29sb3I6IzQ2MjM3Mztcbn1cbmlvbi1iYWNrLWJ1dHRvbntcbiAgLS1jb2xvcjojNDYyMzczO1xuXG59XG5pb24tdG9vbGJhcntcbiAgLS1iYWNrZ3JvdW5kOiNkNmIwZmY7XG59XG4uZGlzY3Vzc2lvbntcbiAgICBoZWlnaHQ6IDEwMCU7XG59XG4ubm8tY2hhdHtcbiAgICBcbiAgICBmb250LXNpemU6IG1lZGl1bTtcbiAgICBjb2xvcjogIzQ2MjM3Mztcbn1cbi5zZW5kZXItbXNne1xuICAgIG1hcmdpbi10b3A6IDEwcHg7XG4gICAgbWFyZ2luLWJvdHRvbTogMTBweDsgIFxuICBcbn1cbi5yZWNle1xuICAgIGNvbG9yOiB3aGl0ZTtcbiAgICBmb250LXNpemU6IDE1cHg7XG4gICAgaGVpZ2h0OiAxMCU7XG4gICAgLS1iYWNrZ3JvdW5kOiAjZDZiMGZmO1xuICAgIHdpZHRoOiA5MCU7XG4gICAgbWFyZ2luOiAwIGF1dG87XG4gICAgLS1ib3JkZXItcmFkaXVzOjI1cHg7XG5cbiAgIFxufVxuLnNlbmR7XG4gICAgY29sb3I6IHdoaXRlO1xuICAgIGZvbnQtc2l6ZTogMTVweDtcbiAgICBoZWlnaHQ6IDEwJTtcbiAgICAtLWJhY2tncm91bmQ6ICM0NjIzNzM7XG4gICAgd2lkdGg6IDkwJTtcbiAgICBtYXJnaW46IDAgYXV0bztcbiAgICAtLWJvcmRlci1yYWRpdXM6MjVweDtcblxuICAgXG59XG4uZGF0ZXtcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgY29sb3I6I2Q2YjBmZjtcbn1cbi5zZW5kZXJ7XG4gICAgaGVpZ2h0OiAxMCU7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgaW9uLWl0ZW17XG4gICAgICAgIC0tYmFja2dyb3VuZDojZDZiMGZmO1xuICAgIH1cbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZDZiMGZmO1xuICAgIGlvbi1pbnB1dHtcbiAgICAgICAgLS1iYWNrZ3JvdW5kOiNkNmIwZmY7XG4gICAgICAgIC0tY29sb3I6IzQ2MjM3MztcdFxuICAgIH1cbiAgICBpb24taWNvbntcbiAgICAgICAgY29sb3I6ICM0NjIzNzM7XG4gICAgICAgIGZvbnQtc2l6ZTogMjVweDtcbiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgIH1cbiAgIFxufSJdfQ== */\"","import { Component, OnInit } from '@angular/core';\nimport {Route,ActivatedRoute} from '@angular/router'\nimport {ChatService} from '../../Services/chat.service';\nimport {AuthentificationService} from '../../Services/authentification.service';\n\nimport * as firebase from 'firebase/app';\n\n@Component({\n  selector: 'app-discussion',\n  templateUrl: './discussion.page.html',\n  styleUrls: ['./discussion.page.scss'],\n})\nexport class DiscussionPage implements OnInit {\n  id:any;\n  message:string;\n  messages:any=[];\n  myid:string;\n  receiverid:string;\n  send_img:string;\n  rec_img:string;\n  constructor(private route: ActivatedRoute,private service:ChatService,private auth:AuthentificationService) { \n    this.route.params.subscribe( params => {\n    \n      this.id=params[\"id\"]\n  } );\n  }\n\n  async ngOnInit() {\n    \n    \n \n       ( await this.service.AsyncMessages(this.id)).subscribe((res)=>{\n     \n          this.messages=[];\n           res.map(value=>{\n             \n              \n              var obj = JSON.parse(JSON.stringify(value.payload.doc.data()));\n              var now=Date.now();\n              var d=obj[\"created_at\"];\n              if(new Date(now).getDay>new Date(d).getDay){\n                obj[\"date\"]=(new Date(d)).getTime().toLocaleString();\n              }else{\n                obj[\"date\"]=new Date(d).getHours()+\":\"+new Date(d).getMinutes()\n              }\n              if(obj['sender']==firebase.auth().currentUser.uid){\n                this.myid=obj['sender'];\n               \n\n              }\n              else{\n                this.receiverid=obj['sender'];\n               \n              }\n             \n              this.messages.push(obj);\n           \n           })\n      });\n      this.getImage();\n   \n     \n  }\n  getImage(){\n    \n    this.auth.getUsers().subscribe(\n\n      data => {\n       \n        data.forEach(d=>{\n          var obj = JSON.parse(JSON.stringify(d.payload.doc.data()));\n          if(obj['uid']==this.myid ){\n           \n            var p= {\n             \n              \"image\": obj.image,\n             \n            };\n           \n           this.send_img=p[\"image\"];\n  \n          }\n          if(obj['uid']==this.receiverid ){\n           \n            var p= {\n             \n              \"image\": obj.image,\n             \n            };\n            this.rec_img=p[\"image\"];\n            \n  \n          }\n        });\n  \n      }\n     );\n     \n\n  }\n\n   send() {\n     this.service.sendMessage(this.message,this.id).then((v)=>{\n        this.message=\"\";\n     });\n  }\n  color(id){\n    if(this.myid==id){\n         return '#d6b0ff'\n    \n    }\n    else{\n      return '#462373'\n    }\n  }\n  slot(id){\n   \n    if(this.myid==id){\n      return 'start';\n      \n \n }\n else{\n   return 'end';\n }\n  }\n  \n}\n","import { Injectable } from '@angular/core';\nimport * as firebase from 'firebase/app';\nimport { AngularFirestore } from '@angular/fire/firestore';\n@Injectable({\n  providedIn: 'root'\n})\nexport class ChatService {\n\n  COLLECTIONMESSAGE: string = \"messagerie\";\n  MESSAGES: string = \"messages\";\n\n  constructor(private afs: AngularFirestore) {\n\n  }\n\n  async AsyncMessages(user2: string) {\n    let currentUser = firebase.auth().currentUser;\n    var iddoc_1 = `${currentUser.uid}_${user2}`;\n    var iddoc_2 = `${user2}_${currentUser.uid}`;\n    let bool=false;\n    var iddoc=iddoc_1;\n    var doc=await  this.afs.collection(this.COLLECTIONMESSAGE).doc(iddoc).ref.get();\n    if(!doc.exists){\n      var doc2=await  this.afs.collection(this.COLLECTIONMESSAGE).doc(iddoc_2).ref.get();\n      if(!doc2.exists){\n        this.afs.collection(this.COLLECTIONMESSAGE).doc(iddoc).set({ users: [currentUser.uid, user2] })\n      }else\n      iddoc=iddoc_2;\n    }\n   \n    return  this.afs.collection(this.COLLECTIONMESSAGE).doc(iddoc).collection(this.MESSAGES,ref=>ref.orderBy(\"created_at\",'asc')).snapshotChanges()\n   \n      //return  this.afs.collection(this.COLLECTIONMESSAGE).doc(iddoc_2).collection(this.MESSAGES,ref=>ref.orderBy(\"created_at\",'asc')).snapshotChanges();\n\n    \n\n  }\n\n  async sendMessage(text: string, user2: string) {//uiduser1_uiduser2\n    let currentUser = firebase.auth().currentUser;\n    var iddoc = `${currentUser.uid}_${user2}`;\n    var docSnap = await this.afs.collection(this.COLLECTIONMESSAGE).doc(iddoc).ref.get();//.collection(this.MESSAGES).doc().set({})\n    if (!docSnap.exists) {\n      iddoc = `${user2}_${currentUser.uid}`;\n    }\n    var now = Date.now();\n    await this.afs.collection(this.COLLECTIONMESSAGE).doc(iddoc).\n    collection(this.MESSAGES).add({ \"sender\": currentUser.uid, \"text\": text, \"created_at\": now });\n\n  }\n\n}\n"],"sourceRoot":""}